{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file:///home/liron/TuneIn/frontend/src/app/Components/HomePage/Register.js"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport imageCompression from \"browser-image-compression\";\n\nexport default function Register() {\n  const [form, setForm] = useState({\n    email: \"\",\n    nickname: \"\",\n    genres: \"\",\n    password: \"\",\n    retypePassword: \"\",\n    profilePic: null,\n  });\n  const [msg, setMsg] = useState(\"\");\n  // Set default preview to the default profile pic path\n  const defaultProfilePicPath = \"/ProjectImages/blank-profile-picture.png\";\n  const [profilePicPreview, setProfilePicPreview] = useState(defaultProfilePicPath);\n\n  // Helper to check if genres are comma separated\n  const isGenresValid = (genres) => {\n    if (!genres) return false;\n    const arr = genres.split(\",\").map(g => g.trim()).filter(Boolean);\n    return arr.length > 0 && (arr.length === 1 || genres.includes(\",\"));\n  };\n\n  \n  const handleChange = (e) => {\n    const { name, value, files } = e.target;\n    if (name === \"profilePic\" && files && files[0]) {\n      setForm((prev) => ({\n        ...prev,\n        profilePic: files[0],\n      }));\n      setProfilePicPreview(URL.createObjectURL(files[0]));\n    } else {\n      setForm((prev) => ({\n        ...prev,\n        [name]: value,\n      }));\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setMsg(\"\");\n\n    // 1. Password validation\n    if (form.password.length < 6) {\n      setMsg(\"Password must be at least 6 characters.\");\n      return;\n    }\n    if (form.password !== form.retypePassword) {\n      setMsg(\"Passwords do not match.\");\n      return;\n    }\n\n    // 2. Genres validation\n    if (!isGenresValid(form.genres)) {\n      setMsg(\"Genres must be comma separated (e.g., Rock, Pop, Jazz).\");\n      return;\n    }\n\n    // 3. Email validation\n    // 4. nickname validation\n    // both checked by backend\n\n    // 5. Profile pic validation\n    let profilePicFile = form.profilePic;\n    if (!profilePicFile) {\n      // Fetch the default image from public folder\n      try {\n        const response = await fetch(defaultProfilePicPath);\n        const blob = await response.blob();\n        profilePicFile = new File([blob], \"blank-profile-picture.png\", { type: blob.type });\n        setMsg(\"No profile picture uploaded. Using default image.\");\n      } catch {\n        setMsg(\"Failed to load default profile picture.\");\n        return;\n      }\n    } else if (![\"image/jpeg\", \"image/png\"].includes(profilePicFile.type)) {\n      setMsg(\"Profile picture must be a .jpg or .png file.\");\n      return;\n    }\n\n    // Compress image\n    let compressedPic = profilePicFile;\n    try {\n      compressedPic = await imageCompression(profilePicFile, {\n        maxSizeMB: 0.05,\n        maxWidthOrHeight: 640,\n        useWebWorker: true,\n      });\n    } catch {\n      setMsg(\"Image compression failed\");\n      return;\n    }\n\n    // Prepare form data\n    const data = new FormData();\n    data.append(\"email\", form.email);\n    data.append(\"nickname\", form.nickname);\n    data.append(\"genres\", form.genres);\n    data.append(\"password\", form.password);\n    data.append(\"retypePassword\", form.retypePassword);\n    data.append(\"profilePic\", compressedPic, compressedPic.name);\n\n    try {\n      await axios.post(\"http://localhost:5000/api/auth/register\", data, {\n        headers: { \"Content-Type\": \"multipart/form-data\" },\n      });\n      setMsg(\"Registration successful!\");\n    } catch (err) {\n      setMsg(err.response?.data?.message || \"Registration failed\");\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <input className=\"w-full border p-2 rounded\" type=\"email\" name=\"email\" placeholder=\"Email\" value={form.email} onChange={handleChange} required />\n      <input className=\"w-full border p-2 rounded\" type=\"text\" name=\"nickname\" placeholder=\"Nickname\" value={form.nickname} onChange={handleChange} required />\n      <input className=\"w-full border p-2 rounded\" type=\"text\" name=\"genres\" placeholder='Genres (comma separated, example: \"Rock, Pop\")' value={form.genres} onChange={handleChange} required />\n      <input className=\"w-full border p-2 rounded\" type=\"password\" name=\"password\" placeholder=\"Password\" value={form.password} onChange={handleChange} required />\n      <input className=\"w-full border p-2 rounded\" type=\"password\" name=\"retypePassword\" placeholder=\"Retype Password\" value={form.retypePassword} onChange={handleChange} required />\n      <input className=\"w-full border p-2 rounded\" type=\"file\" name=\"profilePic\" accept=\"image/png, image/jpeg\" onChange={handleChange} />\n      <img\n        src={profilePicPreview}\n        alt=\"Profile Preview\"\n        className=\"w-24 h-24 object-cover rounded-full mx-auto\"\n      />\n      <button className=\"w-full bg-blue-500 text-white py-2 rounded\" type=\"submit\">\n        Register\n      </button>\n      {msg && <div className=\"text-red-500 text-center\">{msg}</div>}\n    </form>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 359, "column": 0}, "map": {"version":3,"sources":["file:///home/liron/TuneIn/frontend/src/app/Pages/AuthPage.js"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\nimport Login from \"../Components/HomePage/Login\";\nimport Register from \"../Components/HomePage/Register\";\n\nexport default function AuthPage() {\n  const [isLogin, setIsLogin] = useState(true);\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-100\">\n      <div className=\"bg-white p-8 rounded shadow-md w-full max-w-md\">\n        <div className=\"mb-4 flex justify-center gap-2\">\n          <button\n            className={`px-4 py-2 rounded ${isLogin ? \"bg-blue-500 text-white\" : \"bg-gray-200\"}`}\n            onClick={() => setIsLogin(true)}\n          >\n            Login\n          </button>\n          <button\n            className={`px-4 py-2 rounded ${!isLogin ? \"bg-blue-500 text-white\" : \"bg-gray-200\"}`}\n            onClick={() => setIsLogin(false)}\n          >\n            Register\n          </button>\n        </div>\n        {isLogin ? <Login /> : <Register />}\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AACA;;;;;;AAEA;AAHA;;;;;AAKe,SAAS;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,WAAW,CAAC,kBAAkB,EAAE,UAAU,2BAA2B,eAAe;4BACpF,SAAS,IAAM,WAAW;sCAC3B;;;;;;sCAGD,8OAAC;4BACC,WAAW,CAAC,kBAAkB,EAAE,CAAC,UAAU,2BAA2B,eAAe;4BACrF,SAAS,IAAM,WAAW;sCAC3B;;;;;;;;;;;;gBAIF,wBAAU,8OAAC;;;;yCAAW,8OAAC,gJAAA,CAAA,UAAQ;;;;;;;;;;;;;;;;AAIxC","debugId":null}}]
}